var SlickUI={};Phaser.Plugin.SlickUI=function(a,b){Phaser.Plugin.call(this,a,b)},Phaser.Plugin.SlickUI.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.SlickUI.prototype.constructor=Phaser.Plugin.SamplePlugin,Phaser.Plugin.SlickUI.prototype.load=function(a){this.container=new SlickUI.Container.Container(null);var b=a.replace(/\/[^\/]+$/,"/");game.load.json("slick-ui-theme",a),game.load.resetLocked=!0,game.load.start();var c=!1,d=function(){if(game.cache.checkJSONKey("slick-ui-theme")&&!c){var a=game.cache.getJSON("slick-ui-theme");for(var e in a.images)game.load.image("slick-ui-"+e,b+a.images[e]);for(e in a.fonts)game.load.bitmapFont(e,b+a.fonts[e][0],b+a.fonts[e][1]);c=!0,game.load.onFileComplete.remove(d)}};game.load.onFileComplete.add(d,this)},Phaser.Plugin.SlickUI.prototype.add=function(a){return this.container.add(a)},SlickUI.Container=SlickUI.Container?SlickUI.Container:{},SlickUI.Container.Container=function(a){this.parent=a,this.children=[],this.displayGroup=game.add.group(),a?(a.displayGroup.add(this.displayGroup),this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height):(this.x=0,this.y=0,this.width=game.width,this.height=game.height)},SlickUI.Container.Container.prototype.add=function(a){return a.setContainer(this),"function"==typeof a.init&&a.init(),game.world.bringToTop(this.displayGroup),this.children.push(a),a},SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.Button=function(a,b,c,d){this._x=a,this._y=b,this._offsetX=a,this._offsetY=b,this._width=c,this._height=d,this.container=null},SlickUI.Element.Button.prototype.setContainer=function(a){this.container=new SlickUI.Container.Container(a)},SlickUI.Element.Button.prototype.init=function(){var a=game.cache.getJSON("slick-ui-theme"),b=this.container.x=this.container.parent.x+this._x,c=this.container.y=this.container.parent.y+this._y,d=this.container.width=Math.min(this.container.parent.width-this._x,this._width),e=this.container.height=Math.min(this.container.parent.height-this._y,this._height);this.container.x+=Math.round(a.button["border-x"]/2),this.container.y+=Math.round(a.button["border-y"]/2),this.container.width-=a.button["border-x"],this.container.height-=a.button["border-y"];var f=function(f){var g=game.add.bitmapData(d,e);return g.copyRect(f,new Phaser.Rectangle(0,0,a.button["border-x"],a.button["border-y"])),g.copy(f,a.button["border-x"]+1,0,1,a.button["border-y"],a.button["border-x"],0,d-2*a.button["border-x"],a.button["border-y"]),g.copyRect(f,new Phaser.Rectangle(f.width-a.button["border-x"],0,a.button["border-x"],a.button["border-y"]),d-a.button["border-x"]),g.copy(f,0,a.button["border-y"]+1,a.button["border-x"],1,0,a.button["border-y"],a.button["border-x"],e-2*a.button["border-y"]),g.copy(f,f.width-a.button["border-x"],a.button["border-y"]+1,a.button["border-x"],1,d-a.button["border-x"],a.button["border-y"],a.button["border-x"],e-2*a.button["border-y"]),g.copyRect(f,new Phaser.Rectangle(0,f.height-a.button["border-y"],a.button["border-x"],a.button["border-y"]),0,e-a.button["border-y"]),g.copyRect(f,new Phaser.Rectangle(f.width-a.button["border-x"],f.height-a.button["border-y"],a.button["border-x"],a.button["border-y"]),d-a.button["border-x"],e-a.button["border-y"]),g.copy(f,a.button["border-x"]+1,f.height-a.button["border-y"],1,a.button["border-y"],a.button["border-x"],e-a.button["border-y"],d-2*a.button["border-x"],a.button["border-y"]),g.copy(f,a.button["border-x"],a.button["border-y"],1,1,a.button["border-x"],a.button["border-y"],d-2*a.button["border-x"],e-2*a.button["border-y"]),game.make.sprite(b,c,g)};this.spriteOff=f(game.make.sprite(0,0,"slick-ui-button_off")),this.spriteOn=f(game.make.sprite(0,0,"slick-ui-button_on")),this.sprite=game.make.button(b,c),this.sprite.setTexture(this.spriteOff.generateTexture()),this.container.displayGroup.add(this.sprite),this.sprite.x=b,this.sprite.y=c,this._offsetX=b,this._offsetY=c,this.sprite.fixedToCamera=!0;var g=!1;this.sprite.events.onInputOver.add(function(){g=!0},this),this.sprite.events.onInputOut.add(function(){g=!1},this),this.sprite.events.onInputDown.add(function(){this.sprite.setTexture(this.spriteOn.generateTexture())},this),this.sprite.events.onInputUp.add(function(){this.sprite.setTexture(this.spriteOff.generateTexture()),g||this.sprite.events.onInputUp.halt()},this),this.events=this.sprite.events},SlickUI.Element.Button.prototype.add=function(a){return this.container.add(a)},Object.defineProperty(SlickUI.Element.Button.prototype,"x",{get:function(){return this._x-this.container.parent.x},set:function(a){this._x=a,this.container.displayGroup.x=this.container.parent.x+a-this._offsetX}}),Object.defineProperty(SlickUI.Element.Button.prototype,"y",{get:function(){return this._y-this.container.parent.y},set:function(a){this._y=a,this.container.displayGroup.y=this.container.parent.y+a-this._offsetY}}),Object.defineProperty(SlickUI.Element.Button.prototype,"visible",{get:function(){return this.container.displayGroup.visible},set:function(a){this.container.displayGroup.visible=a}}),Object.defineProperty(SlickUI.Element.Button.prototype,"alpha",{get:function(){return this.container.displayGroup.alpha},set:function(a){this.container.displayGroup.alpha=a}}),Object.defineProperty(SlickUI.Element.Button.prototype,"width",{get:function(){return this.container.width},set:function(a){var b=game.cache.getJSON("slick-ui-theme");this._width=Math.round(a+b.button["border-x"]),this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),Object.defineProperty(SlickUI.Element.Button.prototype,"height",{get:function(){return this.container.height},set:function(a){var b=game.cache.getJSON("slick-ui-theme");this._height=Math.round(a+b.button["border-y"]),this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.Checkbox=function(a,b,c){this._x=a,this._y=b,this.container=null,this._checked=!1,this.type=c,"undefined"==typeof c&&(this.type=SlickUI.Element.Checkbox.TYPE_CHECKBOX)},SlickUI.Element.Checkbox.TYPE_CHECKBOX=0,SlickUI.Element.Checkbox.TYPE_RADIO=1,SlickUI.Element.Checkbox.TYPE_CROSS=2,SlickUI.Element.Checkbox.prototype.setContainer=function(a){this.container=a},SlickUI.Element.Checkbox.prototype.init=function(){var a,b=this.container.x+this._x,c=this.container.y+this._y;switch(this.type){case SlickUI.Element.Checkbox.TYPE_RADIO:a="radio";break;case SlickUI.Element.Checkbox.TYPE_CROSS:a="cross";break;default:a="check"}this.sprite=game.make.sprite(b,c,"slick-ui-"+a+"_off"),this._spriteOff=game.make.sprite(0,0,"slick-ui-"+a+"_off"),this._spriteOn=game.make.sprite(0,0,"slick-ui-"+a+"_on"),this.displayGroup=game.add.group(),this.displayGroup.add(this.sprite),this.container.displayGroup.add(this.displayGroup),this.sprite.inputEnabled=!0,this.sprite.fixedToCamera=!0,this.input.useHandCursor=!0,this.events.onInputDown.add(function(){this.checked=!this.checked},this)},Object.defineProperty(SlickUI.Element.Checkbox.prototype,"x",{get:function(){return this.displayGroup.x+this._x},set:function(a){this.displayGroup.x=a-this._x}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"y",{get:function(){return this.displayGroup.y+this._y},set:function(a){this.displayGroup.y=a-this._y}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"checked",{get:function(){return this._checked},set:function(a){this._checked=a,a?this.sprite.setTexture(this._spriteOn.generateTexture()):this.sprite.setTexture(this._spriteOff.generateTexture())}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"visible",{get:function(){return this.sprite.visible},set:function(a){this.sprite.visible=a}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"alpha",{get:function(){return this.sprite.alpha},set:function(a){this.sprite.alpha=a}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"events",{get:function(){return this.sprite.events}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"input",{get:function(){return this.sprite.input}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"width",{get:function(){return this.sprite.width},set:function(a){this.sprite.width=a}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"height",{get:function(){return this.sprite.height},set:function(a){this.sprite.height=a}}),SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.DisplayObject=function(a,b,c,d,e){this._x=a,this._y=b,this._offsetX=a,this._offsetY=b,this.displayObject=c,this.container=null,this._width=d,this._height=e,"undefined"==typeof d&&(this._width=game.width),"undefined"==typeof e&&(this._height=game.height)},SlickUI.Element.DisplayObject.prototype.setContainer=function(a){this.container=new SlickUI.Container.Container(a)},SlickUI.Element.DisplayObject.prototype.init=function(){var a=this.container.x=this.container.parent.x+this._x,b=this.container.y=this.container.parent.y+this._y;this.container.width=Math.min(this.container.parent.width-this._x,this._width),this.container.height=Math.min(this.container.parent.height-this._y,this._height),!this.displayObject instanceof Phaser.Sprite?this.sprite=game.make.sprite(a,b,this.displayObject):this.sprite=this.displayObject,this.container.displayGroup.add(this.sprite),this.sprite.x=a,this.sprite.y=b,this._offsetX=a,this._offsetY=b,this.sprite.fixedToCamera=!0},SlickUI.Element.DisplayObject.prototype.add=function(a){return this.container.add(a)},Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"x",{get:function(){return this._x-this.container.parent.x},set:function(a){this._x=a,this.container.displayGroup.x=this.container.parent.x+a-this._offsetX}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"y",{get:function(){return this._y-this.container.parent.y},set:function(a){this._y=a,this.container.displayGroup.y=this.container.parent.y+a-this._offsetY}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"visible",{get:function(){return this.container.displayGroup.visible},set:function(a){this.container.displayGroup.visible=a}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"alpha",{get:function(){return this.container.displayGroup.alpha},set:function(a){this.container.displayGroup.alpha=a}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"inputEnabled",{get:function(){return this.sprite.inputEnabled},set:function(a){this.sprite.inputEnabled=a,a?this.input=this.sprite.input:this.input=null}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"events",{get:function(){return this.sprite.events}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"width",{get:function(){return this.container.width},set:function(a){this._width=a,this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"height",{get:function(){return this.container.height},set:function(a){this._height=a,this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.Panel=function(a,b,c,d){this._x=a,this._y=b,this._offsetX=a,this._offsetY=b,this._width=c,this._height=d,this.container=null},SlickUI.Element.Panel.prototype.setContainer=function(a){this.container=new SlickUI.Container.Container(a)},SlickUI.Element.Panel.prototype.init=function(){var a=game.cache.getJSON("slick-ui-theme"),b=game.make.sprite(0,0,"slick-ui-panel"),c=game.add.bitmapData(game.width,game.height),d=this.container.x=this.container.parent.x+this._x,e=this.container.y=this.container.parent.y+this._y,f=this.container.width=Math.min(this.container.parent.width-this._x,this._width),g=this.container.height=Math.min(this.container.parent.height-this._y,this._height);this.container.x+=Math.round(a.panel["border-x"]/2),this.container.y+=Math.round(a.panel["border-y"]/2),this.container.width-=a.panel["border-x"],this.container.height-=a.panel["border-y"],c.copyRect(b,new Phaser.Rectangle(0,0,a.panel["border-x"],a.panel["border-y"])),c.copy(b,a.panel["border-x"]+1,0,1,a.panel["border-y"],a.panel["border-x"],0,f-2*a.panel["border-x"],a.panel["border-y"]),c.copyRect(b,new Phaser.Rectangle(b.width-a.panel["border-x"],0,a.panel["border-x"],a.panel["border-y"]),f-a.panel["border-x"]),c.copy(b,0,a.panel["border-y"]+1,a.panel["border-x"],1,0,a.panel["border-y"],a.panel["border-x"],g-2*a.panel["border-y"]),c.copy(b,b.width-a.panel["border-x"],a.panel["border-y"]+1,a.panel["border-x"],1,f-a.panel["border-x"],a.panel["border-y"],a.panel["border-x"],g-2*a.panel["border-y"]),c.copyRect(b,new Phaser.Rectangle(0,b.height-a.panel["border-y"],a.panel["border-x"],a.panel["border-y"]),0,g-a.panel["border-y"]),c.copyRect(b,new Phaser.Rectangle(b.width-a.panel["border-x"],b.height-a.panel["border-y"],a.panel["border-x"],a.panel["border-y"]),f-a.panel["border-x"],g-a.panel["border-y"]),c.copy(b,a.panel["border-x"]+1,b.height-a.panel["border-y"],1,a.panel["border-y"],a.panel["border-x"],g-a.panel["border-y"],f-2*a.panel["border-x"],a.panel["border-y"]),c.copy(b,a.panel["border-x"],a.panel["border-y"],1,1,a.panel["border-x"],a.panel["border-y"],f-2*a.panel["border-x"],g-2*a.panel["border-y"]),this._sprite=this.container.displayGroup.create(d,e,c),this._sprite.fixedToCamera=!0,this._offsetX=d,this._offsetY=e},SlickUI.Element.Panel.prototype.add=function(a){return this.container.add(a)},Object.defineProperty(SlickUI.Element.Panel.prototype,"x",{get:function(){return this._x-this.container.parent.x},set:function(a){this._x=a,this.container.displayGroup.x=this.container.parent.x+a-this._offsetX}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"y",{get:function(){return this._y-this.container.parent.y},set:function(a){this._y=a,this.container.displayGroup.y=this.container.parent.y+a-this._offsetY}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"visible",{get:function(){return this.container.displayGroup.visible},set:function(a){this.container.displayGroup.visible=a}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"alpha",{get:function(){return this.container.displayGroup.alpha},set:function(a){this.container.displayGroup.alpha=a}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"width",{get:function(){return this.container.width},set:function(a){var b=game.cache.getJSON("slick-ui-theme");this._width=Math.round(a+b.panel["border-x"]),this._sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this._sprite)}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"height",{get:function(){return this.container.height},set:function(a){var b=game.cache.getJSON("slick-ui-theme");this._height=Math.round(a+b.panel["border-y"]),this._sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this._sprite)}}),SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.Text=function(a,b,c,d,e,f,g){this.x=a,this.y=b,this.value=c,this.width=f,this.height=g,this.font=e,this.size=d,"undefined"==typeof this.width&&(this.width=game.width),"undefined"==typeof this.height&&(this.height=game.height),"undefined"==typeof this.size&&(this.size=16),this.container=null},SlickUI.Element.Text.prototype.setContainer=function(a){this.container=a},SlickUI.Element.Text.prototype.reset=function(a,b,c){var d,e;d=Math.min(this.container.width-a,this.width),e=Math.min(this.container.height-b,this.height),"undefined"!=typeof this.text&&(c===!1&&(d=this.text.maxWidth,e=this.text.maxHeight),this.text.destroy()),a+=this.container.x,b+=this.container.y,this.text=game.make.bitmapText(a,b,this.font,this.value,this.size),this.text.maxWidth=d,this.text.maxHeight=e,this.container.displayGroup.add(this.text),this.text.fixedToCamera=!0},SlickUI.Element.Text.prototype.init=function(){var a=game.cache.getJSON("slick-ui-theme");"undefined"==typeof this.font&&(this.font=Object.keys(a.fonts)[Object.keys(a.fonts).length-1]),this.reset(this.x,this.y)},SlickUI.Element.Text.prototype.centerHorizontally=function(){return this.reset(this.text.maxWidth/2-this.text.width/2,this.container.y-this.text.y,!1),this},SlickUI.Element.Text.prototype.centerVertically=function(){var a=game.cache.getJSON("slick-ui-theme");return this.reset(this.container.x-this.text.x,this.container.height/2-this.text.height/2-Math.round(a.button["border-y"]/2),!1),this},SlickUI.Element.Text.prototype.center=function(){var a=game.cache.getJSON("slick-ui-theme");return this.reset(this.text.maxWidth/2-this.text.width/2,this.container.height/2-this.text.height/2-Math.round(a.button["border-y"]/2),!1),this};