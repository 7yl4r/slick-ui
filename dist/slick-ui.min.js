var SlickUI={};Phaser.Plugin.SlickUI=function(a,b){Phaser.Plugin.call(this,a,b)},Phaser.Plugin.SlickUI.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.SlickUI.prototype.constructor=Phaser.Plugin.SamplePlugin,Phaser.Plugin.SlickUI.prototype.load=function(a){if("undefined"!=typeof this.container)throw new Error("You should only load one theme per UI");this.container=new SlickUI.Container.Container(null);var b=a.replace(/\/[^\/]+$/,"/");game.load.json("slick-ui-theme",a),game.load.resetLocked=!0,game.load.start();var c=!1,d=function(){if(game.cache.checkJSONKey("slick-ui-theme")&&!c){var a=game.cache.getJSON("slick-ui-theme");for(var e in a.images)game.load.image("slick-ui-"+e,b+a.images[e]);for(e in a.fonts)game.load.bitmapFont(e,b+a.fonts[e][0],b+a.fonts[e][1]);c=!0,game.load.onFileComplete.remove(d)}};game.load.onFileComplete.add(d,this)},Phaser.Plugin.SlickUI.prototype.add=function(a){return this.container.add(a)},SlickUI.Container=SlickUI.Container?SlickUI.Container:{},SlickUI.Container.Container=function(a){this.parent=a,this.displayGroup=game.add.group(),a?(a.displayGroup.add(this.displayGroup),this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height):(this.x=0,this.y=0,this.width=game.width,this.height=game.height)},SlickUI.Container.Container.prototype.add=function(a){return a.setContainer(this),"function"==typeof a.init&&a.init(),game.world.bringToTop(this.displayGroup),a},SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.Button=function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d,this.container=null},SlickUI.Element.Button.prototype.setContainer=function(a){this.container=new SlickUI.Container.Container(a)},SlickUI.Element.Button.prototype.init=function(){var a=game.cache.getJSON("slick-ui-theme"),b=this.container.x=this.container.parent.x+this.x,c=this.container.y=this.container.parent.y+this.y,d=this.container.width=Math.min(this.container.parent.width-this.x,this.width),e=this.container.height=Math.min(this.container.parent.height-this.y,this.height);this.container.x+=Math.round(a.button["border-x"]/2),this.container.y+=Math.round(a.button["border-y"]/2),this.container.width-=a.button["border-x"],this.container.height-=a.button["border-y"];var f=function(f){var g=game.add.bitmapData(d,e);return g.copyRect(f,new Phaser.Rectangle(0,0,a.button["border-x"],a.button["border-y"])),g.copy(f,a.button["border-x"]+1,0,1,a.button["border-y"],a.button["border-x"],0,d-2*a.button["border-x"],a.button["border-y"]),g.copyRect(f,new Phaser.Rectangle(f.width-a.button["border-x"],0,a.button["border-x"],a.button["border-y"]),d-a.button["border-x"]),g.copy(f,0,a.button["border-y"]+1,a.button["border-x"],1,0,a.button["border-y"],a.button["border-x"],e-2*a.button["border-y"]),g.copy(f,f.width-a.button["border-x"],a.button["border-y"]+1,a.button["border-x"],1,d-a.button["border-x"],a.button["border-y"],a.button["border-x"],e-2*a.button["border-y"]),g.copyRect(f,new Phaser.Rectangle(0,f.height-a.button["border-y"],a.button["border-x"],a.button["border-y"]),0,e-a.button["border-y"]),g.copyRect(f,new Phaser.Rectangle(f.width-a.button["border-x"],f.height-a.button["border-y"],a.button["border-x"],a.button["border-y"]),d-a.button["border-x"],e-a.button["border-y"]),g.copy(f,a.button["border-x"]+1,f.height-a.button["border-y"],1,a.button["border-y"],a.button["border-x"],e-a.button["border-y"],d-2*a.button["border-x"],a.button["border-y"]),g.copy(f,a.button["border-x"],a.button["border-y"],1,1,a.button["border-x"],a.button["border-y"],d-2*a.button["border-x"],e-2*a.button["border-y"]),game.make.sprite(b,c,g)};this.spriteOff=f(game.make.sprite(0,0,"slick-ui-button_off")),this.spriteOn=f(game.make.sprite(0,0,"slick-ui-button_on")),this.sprite=game.make.button(b,c),this.sprite.setTexture(this.spriteOff.generateTexture()),this.container.displayGroup.add(this.sprite),this.sprite.x=b,this.sprite.y=c,this.sprite.fixedToCamera=!0,this.sprite.events.onInputDown.add(function(){this.sprite.setTexture(this.spriteOn.generateTexture())},this),this.sprite.events.onInputUp.add(function(){this.sprite.setTexture(this.spriteOff.generateTexture())},this),this.events=this.sprite.events},SlickUI.Element.Button.prototype.add=function(a){return this.container.add(a)},SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.DisplayObject=function(a,b,c,d,e){this.x=a,this.y=b,this.displayObject=c,this.container=null,this.width=d,this.height=e,"undefined"==typeof d&&(this.width=game.width),"undefined"==typeof e&&(this.height=game.height)},SlickUI.Element.DisplayObject.prototype.setContainer=function(a){this.container=new SlickUI.Container.Container(a)},SlickUI.Element.DisplayObject.prototype.init=function(){var a=this.container.x=this.container.parent.x+this.x,b=this.container.y=this.container.parent.y+this.y;this.container.width=Math.min(this.container.parent.width-this.x,this.width),this.container.height=Math.min(this.container.parent.height-this.y,this.height),!this.displayObject instanceof Phaser.Sprite?this.sprite=game.make.sprite(a,b,this.displayObject):this.sprite=this.displayObject,this.container.displayGroup.add(this.sprite),this.sprite.x=a,this.sprite.y=b,this.sprite.fixedToCamera=!0},SlickUI.Element.Button.prototype.add=function(a){return this.container.add(a)},SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.Panel=function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d,this.container=null},SlickUI.Element.Panel.prototype.setContainer=function(a){this.container=new SlickUI.Container.Container(a)},SlickUI.Element.Panel.prototype.init=function(){var a=game.cache.getJSON("slick-ui-theme"),b=game.make.sprite(0,0,"slick-ui-panel"),c=game.add.bitmapData(game.width,game.height),d=this.container.x=this.container.parent.x+this.x,e=this.container.y=this.container.parent.y+this.y,f=this.container.width=Math.min(this.container.parent.width-this.x,this.width),g=this.container.height=Math.min(this.container.parent.height-this.y,this.height);this.container.x+=Math.round(a.panel["border-x"]/2),this.container.y+=Math.round(a.panel["border-y"]/2),this.container.width-=a.panel["border-x"],this.container.height-=a.panel["border-y"],c.copyRect(b,new Phaser.Rectangle(0,0,a.panel["border-x"],a.panel["border-y"])),c.copy(b,a.panel["border-x"]+1,0,1,a.panel["border-y"],a.panel["border-x"],0,f-2*a.panel["border-x"],a.panel["border-y"]),c.copyRect(b,new Phaser.Rectangle(b.width-a.panel["border-x"],0,a.panel["border-x"],a.panel["border-y"]),f-a.panel["border-x"]),c.copy(b,0,a.panel["border-y"]+1,a.panel["border-x"],1,0,a.panel["border-y"],a.panel["border-x"],g-2*a.panel["border-y"]),c.copy(b,b.width-a.panel["border-x"],a.panel["border-y"]+1,a.panel["border-x"],1,f-a.panel["border-x"],a.panel["border-y"],a.panel["border-x"],g-2*a.panel["border-y"]),c.copyRect(b,new Phaser.Rectangle(0,b.height-a.panel["border-y"],a.panel["border-x"],a.panel["border-y"]),0,g-a.panel["border-y"]),c.copyRect(b,new Phaser.Rectangle(b.width-a.panel["border-x"],b.height-a.panel["border-y"],a.panel["border-x"],a.panel["border-y"]),f-a.panel["border-x"],g-a.panel["border-y"]),c.copy(b,a.panel["border-x"]+1,b.height-a.panel["border-y"],1,a.panel["border-y"],a.panel["border-x"],g-a.panel["border-y"],f-2*a.panel["border-x"],a.panel["border-y"]),c.copy(b,a.panel["border-x"],a.panel["border-y"],1,1,a.panel["border-x"],a.panel["border-y"],f-2*a.panel["border-x"],g-2*a.panel["border-y"]),this.container.displayGroup.create(d,e,c).fixedToCamera=!0},SlickUI.Element.Panel.prototype.add=function(a){return this.container.add(a)},SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.Text=function(a,b,c,d,e,f,g){this.x=a,this.y=b,this.value=c,this.width=f,this.height=g,this.font=e,this.size=d,"undefined"==typeof this.width&&(this.width=game.width),"undefined"==typeof this.height&&(this.height=game.height),"undefined"==typeof this.size&&(this.size=16),this.container=null},SlickUI.Element.Text.prototype.setContainer=function(a){this.container=a},SlickUI.Element.Text.prototype.reset=function(a,b,c){var d,e;d=Math.min(this.container.width-a,this.width),e=Math.min(this.container.height-b,this.height),"undefined"!=typeof this.text&&(c===!1&&(d=this.text.maxWidth,e=this.text.maxHeight),this.text.destroy()),a+=this.container.x,b+=this.container.y,this.text=game.make.bitmapText(a,b,this.font,this.value,this.size),this.text.maxWidth=d,this.text.maxHeight=e,this.container.displayGroup.add(this.text),this.text.fixedToCamera=!0},SlickUI.Element.Text.prototype.init=function(){var a=game.cache.getJSON("slick-ui-theme");"undefined"==typeof this.font&&(this.font=Object.keys(a.fonts)[Object.keys(a.fonts).length-1]),this.reset(this.x,this.y)},SlickUI.Element.Text.prototype.centerHorizontally=function(){return this.reset(this.text.maxWidth/2-this.text.width/2,this.container.y-this.text.y,!1),this},SlickUI.Element.Text.prototype.centerVertically=function(){return this.reset(this.container.x-this.text.x,this.text.maxHeight/2-this.text.height/2,!1),this},SlickUI.Element.Text.prototype.center=function(){return this.reset(this.text.maxWidth/2-this.text.width/2,this.text.maxHeight/2-this.text.height/1.2,!1),this};